import{b as ze,j as s,c as Be,u as Ke,H as Le}from"./app-BED-x5Xa.js";import{X as Ee,A as Oe}from"./app-layout-BUsoIHdA.js";import{B as v}from"./app-logo-icon-CjMjDikm.js";import{I as d}from"./input-BEV5lFm5.js";import{L as n}from"./label-Bamd4Ecp.js";import{S as Me}from"./switch-By00n1Bq.js";import{b as Q,C as Fe,a as Ge,c as Y}from"./card-Bubi5ddX.js";import{R as Ve,a as He}from"./radio-group-xEwLWOWe.js";import{P as Te}from"./plus-RoiHdbX1.js";import{T as Ue}from"./trash-2-Dc5Lp0l1.js";/* empty css            */import"./index-CuV_zcET.js";import"./index-tLZqFMsW.js";import"./index-Cy5ipuhJ.js";async function qe(){window.google?.accounts?.oauth2||await new Promise((e,o)=>{const l=document.createElement("script");l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.onload=()=>e(),l.onerror=()=>o(new Error("Failed to load GIS")),document.head.appendChild(l)})}async function We(){window.gapi?.picker||await new Promise((e,o)=>{const l=document.createElement("script");l.src="https://apis.google.com/js/api.js",l.async=!0,l.defer=!0,l.onload=()=>{window.gapi.load("picker",()=>e())},l.onerror=()=>o(new Error("Failed to load GAPI")),document.head.appendChild(l)})}const Re="image/*,video/*";async function Xe(e){await Promise.all([qe(),We()]);const o=window.google,l=await new Promise((a,_)=>{o.accounts.oauth2.initTokenClient({client_id:e.clientId,scope:"https://www.googleapis.com/auth/drive.readonly",callback:c=>c?.access_token?a(c.access_token):_(new Error("No access token"))}).requestAccessToken({prompt:""})});return new Promise(a=>{new o.picker.PickerBuilder().setOAuthToken(l).setDeveloperKey(e.apiKey).setOrigin(window.location.origin).setTitle("Select or Upload (images/videos)").addView(new o.picker.DocsView(o.picker.ViewId.DOCS).setIncludeFolders(!1).setSelectFolderEnabled(!1).setMimeTypes(Re)).addView(new o.picker.DocsUploadView().setIncludeFolders(!1).setSelectFolderEnabled(!1).setMimeTypes(Re)).setCallback(g=>{if(g?.action===o.picker.Action.PICKED){const c=g.docs?.[0];return a(c?{id:c.id,mimeType:c.mimeType,name:c.name}:null)}if(g?.action===o.picker.Action.CANCEL)return a(null)}).build().setVisible(!0)})}const p=({onPick:e,label:o="Pick"})=>{const{google:l}=ze().props,a=async()=>{try{const _=await Xe({apiKey:l.apiKey,clientId:l.clientId});_?.id&&e(_.id)}catch(_){console.error(_),alert("Google Drive Picker failed to open. Check API key/client ID and OAuth consent screen.")}};return s.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center rounded border px-2 py-1 text-sm",children:o})},$e=[{title:"Gallery Albums",href:"/admin/gallery-albums"},{title:"Create",href:"#"}];function ds(){const e=Be.c(140);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={title:"",slug:"",cover_virtual_image_id:"",cover_real_image_id:"",has_sub_albums:!1,order:0,is_active:!0,sub_albums:[],images:[]},e[0]=o):o=e[0];const{data:l,setData:a,post:_,processing:g,errors:c}=Ke(o);let Z;e[1]!==_?(Z=i=>{i.preventDefault(),_("/admin/gallery-albums")},e[1]=_,e[2]=Z):Z=e[2];const Ne=Z;let ee;e[3]!==l.sub_albums||e[4]!==a?(ee=()=>{a("sub_albums",[...l.sub_albums,{slug:"",title:"",cover_virtual_image_id:"",cover_real_image_id:"",images:[]}])},e[3]=l.sub_albums,e[4]=a,e[5]=ee):ee=e[5];const ke=ee;let se;e[6]!==l.sub_albums||e[7]!==a?(se=(i,t,r)=>{const m=[...l.sub_albums];m[i][t]=r,a("sub_albums",m)},e[6]=l.sub_albums,e[7]=a,e[8]=se):se=e[8];const h=se;let le;e[9]!==l.sub_albums||e[10]!==a?(le=i=>{a("sub_albums",l.sub_albums.filter((t,r)=>r!==i))},e[9]=l.sub_albums,e[10]=a,e[11]=le):le=e[11];const we=le;let ae;e[12]!==l.sub_albums||e[13]!==a?(ae=i=>{const t=[...l.sub_albums];t[i].images.push({virtual_image_id:"",real_image_id:""}),a("sub_albums",t)},e[12]=l.sub_albums,e[13]=a,e[14]=ae):ae=e[14];const Ce=ae;let ie;e[15]!==l.sub_albums||e[16]!==a?(ie=(i,t,r,m)=>{const u=[...l.sub_albums];u[i].images[t][r]=m,a("sub_albums",u)},e[15]=l.sub_albums,e[16]=a,e[17]=ie):ie=e[17];const x=ie;let te;e[18]!==l.sub_albums||e[19]!==a?(te=(i,t)=>{const r=[...l.sub_albums];r[i].images=r[i].images.filter((m,u)=>u!==t),a("sub_albums",r)},e[18]=l.sub_albums,e[19]=a,e[20]=te):te=e[20];const Se=te;let re;e[21]!==l.images||e[22]!==a?(re=()=>{a("images",[...l.images,{virtual_image_id:"",real_image_id:""}])},e[21]=l.images,e[22]=a,e[23]=re):re=e[23];const Ie=re;let ce;e[24]!==l.images||e[25]!==a?(ce=(i,t,r)=>{const m=[...l.images];m[i][t]=r,a("images",m)},e[24]=l.images,e[25]=a,e[26]=ce):ce=e[26];const b=ce;let oe;e[27]!==l.images||e[28]!==a?(oe=i=>{a("images",l.images.filter((t,r)=>r!==i))},e[27]=l.images,e[28]=a,e[29]=oe):oe=e[29];const Pe=oe;let me;e[30]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Le,{title:"Create Gallery Album"}),e[30]=me):me=e[30];let ne;e[31]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Create Gallery Album"})}),e[31]=ne):ne=e[31];let de;e[32]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(Fe,{children:s.jsx(Ge,{children:"Basic Information"})}),e[32]=de):de=e[32];let ue;e[33]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(n,{htmlFor:"title",children:"Title *"}),e[33]=ue):ue=e[33];let f;e[34]!==a?(f=i=>a("title",i.target.value),e[34]=a,e[35]=f):f=e[35];let j;e[36]!==l.title||e[37]!==f?(j=s.jsx(d,{id:"title",value:l.title,onChange:f,placeholder:"Enter album title"}),e[36]=l.title,e[37]=f,e[38]=j):j=e[38];let y;e[39]!==c.title?(y=c.title&&s.jsx("p",{className:"text-sm text-destructive",children:c.title}),e[39]=c.title,e[40]=y):y=e[40];let N;e[41]!==j||e[42]!==y?(N=s.jsxs("div",{className:"space-y-2",children:[ue,j,y]}),e[41]=j,e[42]=y,e[43]=N):N=e[43];let _e;e[44]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(n,{htmlFor:"slug",children:"Slug"}),e[44]=_e):_e=e[44];let k;e[45]!==a?(k=i=>a("slug",i.target.value),e[45]=a,e[46]=k):k=e[46];let w;e[47]!==l.slug||e[48]!==k?(w=s.jsxs("div",{className:"space-y-2",children:[_e,s.jsx(d,{id:"slug",value:l.slug,onChange:k,placeholder:"auto-generated-from-title"})]}),e[47]=l.slug,e[48]=k,e[49]=w):w=e[49];let C;e[50]!==N||e[51]!==w?(C=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N,w]}),e[50]=N,e[51]=w,e[52]=C):C=e[52];let ge;e[53]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(n,{htmlFor:"cover_virtual_image_id",children:"Cover Virtual Image ID *"}),e[53]=ge):ge=e[53];let S;e[54]!==a?(S=i=>a("cover_virtual_image_id",i.target.value),e[54]=a,e[55]=S):S=e[55];let I;e[56]!==l.cover_virtual_image_id||e[57]!==S?(I=s.jsx(d,{id:"cover_virtual_image_id",value:l.cover_virtual_image_id,onChange:S,placeholder:"Google Drive file ID"}),e[56]=l.cover_virtual_image_id,e[57]=S,e[58]=I):I=e[58];let P;e[59]!==a?(P=s.jsx(p,{onPick:i=>a("cover_virtual_image_id",i),label:"Pick"}),e[59]=a,e[60]=P):P=e[60];let D;e[61]!==I||e[62]!==P?(D=s.jsxs("div",{className:"flex gap-2",children:[I,P]}),e[61]=I,e[62]=P,e[63]=D):D=e[63];let A;e[64]!==c.cover_virtual_image_id?(A=c.cover_virtual_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:c.cover_virtual_image_id}),e[64]=c.cover_virtual_image_id,e[65]=A):A=e[65];let F;e[66]!==D||e[67]!==A?(F=s.jsxs("div",{className:"space-y-2",children:[ge,D,A]}),e[66]=D,e[67]=A,e[68]=F):F=e[68];let he;e[69]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(n,{htmlFor:"cover_real_image_id",children:"Cover Real Image ID *"}),e[69]=he):he=e[69];let G;e[70]!==a?(G=i=>a("cover_real_image_id",i.target.value),e[70]=a,e[71]=G):G=e[71];let T;e[72]!==l.cover_real_image_id||e[73]!==G?(T=s.jsx(d,{id:"cover_real_image_id",value:l.cover_real_image_id,onChange:G,placeholder:"Google Drive file ID"}),e[72]=l.cover_real_image_id,e[73]=G,e[74]=T):T=e[74];let E;e[75]!==a?(E=s.jsx(p,{onPick:i=>a("cover_real_image_id",i),label:"Pick"}),e[75]=a,e[76]=E):E=e[76];let V;e[77]!==T||e[78]!==E?(V=s.jsxs("div",{className:"flex gap-2",children:[T,E]}),e[77]=T,e[78]=E,e[79]=V):V=e[79];let R;e[80]!==c.cover_real_image_id?(R=c.cover_real_image_id&&s.jsx("p",{className:"text-sm text-destructive",children:c.cover_real_image_id}),e[80]=c.cover_real_image_id,e[81]=R):R=e[81];let z;e[82]!==V||e[83]!==R?(z=s.jsxs("div",{className:"space-y-2",children:[he,V,R]}),e[82]=V,e[83]=R,e[84]=z):z=e[84];let B;e[85]!==F||e[86]!==z?(B=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[F,z]}),e[85]=F,e[86]=z,e[87]=B):B=e[87];let ve;e[88]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(n,{children:"Album Type *"}),e[88]=ve):ve=e[88];const De=l.has_sub_albums?"sub_albums":"direct";let K;e[89]!==a?(K=i=>a("has_sub_albums",i==="sub_albums"),e[89]=a,e[90]=K):K=e[90];let pe;e[91]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ve,{value:"direct",id:"direct"}),s.jsx(n,{htmlFor:"direct",children:"Direct Images"})]}),e[91]=pe):pe=e[91];let xe;e[92]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ve,{value:"sub_albums",id:"sub_albums"}),s.jsx(n,{htmlFor:"sub_albums",children:"With Sub Albums"})]}),e[92]=xe):xe=e[92];let L;e[93]!==De||e[94]!==K?(L=s.jsxs("div",{className:"space-y-2",children:[ve,s.jsxs(He,{value:De,onValueChange:K,children:[pe,xe]})]}),e[93]=De,e[94]=K,e[95]=L):L=e[95];let be;e[96]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(n,{htmlFor:"order",children:"Order"}),e[96]=be):be=e[96];let O;e[97]!==a?(O=i=>a("order",parseInt(i.target.value)||0),e[97]=a,e[98]=O):O=e[98];let M;e[99]!==l.order||e[100]!==O?(M=s.jsxs("div",{className:"space-y-2",children:[be,s.jsx(d,{id:"order",type:"number",value:l.order,onChange:O})]}),e[99]=l.order,e[100]=O,e[101]=M):M=e[101];let H;e[102]!==a?(H=i=>a("is_active",i),e[102]=a,e[103]=H):H=e[103];let U;e[104]!==l.is_active||e[105]!==H?(U=s.jsx(Me,{id:"is_active",checked:l.is_active,onCheckedChange:H}),e[104]=l.is_active,e[105]=H,e[106]=U):U=e[106];let fe;e[107]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(n,{htmlFor:"is_active",children:"Active"}),e[107]=fe):fe=e[107];let q;e[108]!==U?(q=s.jsxs("div",{className:"flex items-center space-x-2",children:[U,fe]}),e[108]=U,e[109]=q):q=e[109];let W;e[110]!==M||e[111]!==q?(W=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[M,q]}),e[110]=M,e[111]=q,e[112]=W):W=e[112];let X;e[113]!==C||e[114]!==B||e[115]!==L||e[116]!==W?(X=s.jsxs(Q,{children:[de,s.jsxs(Y,{className:"space-y-4",children:[C,B,L,W]})]}),e[113]=C,e[114]=B,e[115]=L,e[116]=W,e[117]=X):X=e[117];let $;e[118]!==Ie||e[119]!==ke||e[120]!==Ce||e[121]!==l.has_sub_albums||e[122]!==l.images||e[123]!==l.sub_albums||e[124]!==Pe||e[125]!==we||e[126]!==Se||e[127]!==b||e[128]!==h||e[129]!==x?($=l.has_sub_albums?s.jsxs(Q,{children:[s.jsx(Fe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ge,{children:"Sub Albums *"}),s.jsxs(v,{type:"button",onClick:ke,size:"sm",children:[s.jsx(Te,{className:"mr-2 h-4 w-4"}),"Add Sub Album"]})]})}),s.jsx(Y,{className:"space-y-4",children:l.sub_albums.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No sub albums added yet."}):l.sub_albums.map((i,t)=>s.jsx(Q,{children:s.jsxs(Y,{className:"pt-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-semibold",children:["Sub Album ",t+1]}),s.jsx(v,{type:"button",variant:"outline",size:"sm",onClick:()=>we(t),children:s.jsx(Ue,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Title *"}),s.jsx(d,{value:i.title,onChange:r=>h(t,"title",r.target.value),placeholder:"Enter sub album title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Slug"}),s.jsx(d,{value:i.slug,onChange:r=>h(t,"slug",r.target.value),placeholder:"auto-generated"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Cover Virtual Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.cover_virtual_image_id,onChange:r=>h(t,"cover_virtual_image_id",r.target.value),placeholder:"Google Drive ID"}),s.jsx(p,{onPick:r=>h(t,"cover_virtual_image_id",r),label:"Pick"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Cover Real Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.cover_real_image_id,onChange:r=>h(t,"cover_real_image_id",r.target.value),placeholder:"Google Drive ID"}),s.jsx(p,{onPick:r=>h(t,"cover_real_image_id",r),label:"Pick"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(n,{children:"Images"}),s.jsxs(v,{type:"button",onClick:()=>Ce(t),size:"sm",variant:"outline",children:[s.jsx(Te,{className:"mr-2 h-4 w-4"}),"Add Image"]})]}),i.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No images added"}):s.jsx("div",{className:"space-y-2",children:i.images.map((r,m)=>s.jsx(Q,{children:s.jsxs(Y,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",m+1]}),s.jsx(v,{type:"button",variant:"ghost",size:"sm",onClick:()=>Se(t,m),children:s.jsx(Ee,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:r.virtual_image_id,onChange:u=>x(t,m,"virtual_image_id",u.target.value),placeholder:"Virtual Image ID"}),s.jsx(p,{onPick:u=>x(t,m,"virtual_image_id",u),label:"Pick"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:r.real_image_id,onChange:u=>x(t,m,"real_image_id",u.target.value),placeholder:"Real Image ID"}),s.jsx(p,{onPick:u=>x(t,m,"real_image_id",u),label:"Pick"})]})]})]})},m))})]})]})},t))})]}):s.jsxs(Q,{children:[s.jsx(Fe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ge,{children:"Images *"}),s.jsxs(v,{type:"button",onClick:Ie,size:"sm",children:[s.jsx(Te,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})}),s.jsx(Y,{className:"space-y-4",children:l.images.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No images added yet."}):l.images.map((i,t)=>s.jsx(Q,{children:s.jsxs(Y,{className:"pt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Image ",t+1]}),s.jsx(v,{type:"button",variant:"ghost",size:"sm",onClick:()=>Pe(t),children:s.jsx(Ee,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Virtual Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.virtual_image_id,onChange:r=>b(t,"virtual_image_id",r.target.value),placeholder:"Google Drive ID"}),s.jsx(p,{onPick:r=>b(t,"virtual_image_id",r),label:"Pick"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{children:"Real Image ID *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(d,{value:i.real_image_id,onChange:r=>b(t,"real_image_id",r.target.value),placeholder:"Google Drive ID"}),s.jsx(p,{onPick:r=>b(t,"real_image_id",r),label:"Pick"})]})]})]})]})},t))})]}),e[118]=Ie,e[119]=ke,e[120]=Ce,e[121]=l.has_sub_albums,e[122]=l.images,e[123]=l.sub_albums,e[124]=Pe,e[125]=we,e[126]=Se,e[127]=b,e[128]=h,e[129]=x,e[130]=$):$=e[130];let je;e[131]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(v,{type:"button",variant:"outline",onClick:Je,children:"Cancel"}),e[131]=je):je=e[131];const Ae=g?"Creating...":"Create Album";let J;e[132]!==g||e[133]!==Ae?(J=s.jsxs("div",{className:"flex justify-end gap-2",children:[je,s.jsx(v,{type:"submit",disabled:g,children:Ae})]}),e[132]=g,e[133]=Ae,e[134]=J):J=e[134];let ye;return e[135]!==Ne||e[136]!==X||e[137]!==$||e[138]!==J?(ye=s.jsxs(Oe,{breadcrumbs:$e,children:[me,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[ne,s.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[X,$,J]})]})]}),e[135]=Ne,e[136]=X,e[137]=$,e[138]=J,e[139]=ye):ye=e[139],ye}function Je(){return window.history.back()}export{ds as default};
